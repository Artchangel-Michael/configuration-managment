# Эмулятор виртуальной файловой системы (VFS CLI)

Программа реализует **эмулятор виртуальной файловой системы (VFS)** с интерактивным интерфейсом, набором базовых команд и возможностью выполнения скриптов (`.emu` файлов).  
Поддерживается запуск в **интерактивном режиме (REPL)** и автоматическое выполнение команд из файла-скрипта.

---

## Возможности

Эмулятор имитирует работу командной оболочки, аналогичной bash.  
Поддерживаемые команды:

| Команда | Описание                                                            |
|----------|---------------------------------------------------------------------|
| `ls` | Показать содержимое текущей директории                              |
| `cd <путь>` | Перейти в указанную директорию (по умолчанию в корневую)            |
| `out_var <переменная>` | Вывести значение переменной окружения                               |
| `run_script <путь>` | Выполнить указанный скрипт `.emu`                                   |
| `head <файл> [N]` | Показать первые N строк файла (по умолчанию 10)                     |
| `history [N]` | Показать историю  последних N команд <br/>(по умолчанию всех) |
| `uptime` | Показать время работы программы                                     |
| `rmdir <путь>` | Удалить пустую директорию                                           |
| `cp <источник> <назначение>` | Копировать файл или директорию                                      |
| `exit` / `quit` | Завершить работу эмулятора                                          |

---

## Структура виртуальной файловой системы

При запуске программа автоматически создаёт структуру папок внутри указанного каталога `--vfs`:

```
myvfs/
├── files/
│   └── text1.txt
├── proj/
├── scripts/
│   ├── test1.emu
│   ├── test2.emu
│   ├── test3.emu
│   ├── test4.emu
│   └── test5.emu
```

Файлы `*.emu` — это примеры скриптов, демонстрирующих работу команд.

---

## Запуск программы

### Вариант 1 — с выполнением стартового скрипта

```bash
python main.py --vfs myvfs --script myvfs/scripts/test1.emu repl
```

Программа создаст виртуальную файловую систему в папке `myvfs`, выполнит `test1.emu`, а затем перейдёт в интерактивный режим.

---

### Вариант 2 — только интерактивный режим

```bash
python main.py --vfs myvfs repl
```

После запуска появится приглашение в виде:

```
user@hostname:~/myvfs$
```

Можно вводить команды вручную, например:

```
ls
cd scripts
run_script test1.emu
out_var %USERPROFILE%
history
exit
```

---

## Пример скрипта `.emu`

Файлы сценариев можно писать вручную. Пример:

```bash
# Проверка базовых команд
ls
cd scripts
out_var $PATH
head myvfs/files/text1.txt 5
history
exit
```

---

## Пример вывода `uptime`

```
Uptime: 0h 2m 34s 510ms
```

---

## Особенности и ограничения

- Программа **не позволяет выходить за пределы VFS** (все операции выполняются только внутри неё).  
- Команда `rmdir` удаляет **только пустые директории**.  
- Команда `cp` поддерживает копирование **как файлов, так и директорий**.  
- Неизвестные команды вызывают ошибку, но не прерывают сессию.

---

## Зависимости

Для работы необходимы стандартные библиотеки Python:

- `os`
- `socket`
- `click`
- `time`
- `shutil`

Установка `click` (если не установлен):

```bash
pip install click
```

---

##  Автор

Горохов Михаил Алексеевич  
